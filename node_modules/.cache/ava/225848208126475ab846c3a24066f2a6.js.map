{"version":3,"sources":["test.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;;;AAEA,IAAM,MAAM,iCAAZ;AACA,IAAM,OAAO,uCAAb;AACA,IAAM,OAAO,wCAAb;;AAEA,mBAAK,gBAAL;AAAA,kEAAuB,iBAAM,CAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACH,IAAI,QAAJ,CAAa,eAAK,IAAL,CAAU,SAAV,EAAqB,UAArB,EAAkC,aAAlC,CAAb,CADG;;AAAA;AACf,eADe;AAAA;AAAA,mBAEF,KAAK,GAAL,CAFE;;AAAA;AAEf,gBAFe;;;AAIrB,oBAAQ,KAAR,CAAc,IAAI,MAAlB,EAA0B,KAAK,MAA/B;AACA,cAAE,IAAF,uBAAO,uDAAK,MAAL,mCAAc,4CAAI,MAAlB,sBAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAPqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;;AAAA;AAAA;AAAA;AAAA;;AAUA,mBAAK,gBAAL;AAAA,mEAAuB,kBAAM,CAAN;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACH,IAAI,QAAJ,CAAa,eAAK,IAAL,CAAU,SAAV,EAAqB,UAArB,EAAkC,aAAlC,CAAb,CADG;;AAAA;AACf,eADe;AAAA;AAAA,mBAEF,KAAK,GAAL,CAFE;;AAAA;AAEf,gBAFe;;;AAIrB,oBAAQ,KAAR,CAAc,IAAI,MAAlB,EAA0B,KAAK,MAA/B;AACA,cAAE,IAAF,yBAAO,yDAAK,MAAL,oCAAc,6CAAI,MAAlB,sBAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAEA,gBAAI,SAAJ,CAAc,eAAK,IAAL,CAAU,SAAV,EAAqB,SAArB,EAAiC,YAAjC,CAAd,EAA8D,IAA9D;AATqB;AAAA,mBAUH,KAAK;AACvB,2BAAa,eAAK,IAAL,CAAU,SAAV,EAAqB,UAArB,EAAkC,aAAlC,CADU;AAEvB,6BAAe,eAAK,IAAL,CAAU,SAAV,EAAqB,SAArB,EAAiC,YAAjC,CAFQ;AAGvB,yBAAW,eAAK,IAAL,CAAU,SAAV,EAAqB,SAArB,EAAiC,UAAjC;AAHY,aAAL,CAVG;;AAAA;AAUhB,gBAVgB;;AAetB,cAAE,KAAF,yBAAQ,IAAR;AAAA;AAAA;AAAA;AAAA;AAAA;;AAfsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;;AAAA;AAAA;AAAA;AAAA;;AAmBA,mBAAK,KAAL,EAAY,aAAK;AACb,IAAE,IAAF;AACH,CAFD;;AAIA,mBAAK,KAAL;AAAA,mEAAY,kBAAM,CAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACF,eADE,GACI,kBAAQ,OAAR,CAAgB,KAAhB,CADJ;AAAA,2BAGR,CAHQ;AAAA;AAAA;AAAA;AAAA,mBAGG,GAHH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,yBAGN,EAHM,kCAGQ,KAHR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAZ;;AAAA;AAAA;AAAA;AAAA","file":"test.js","sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport pify from 'pify';\nimport test from 'ava';\nimport imageDiff from 'image-diff';\n\nimport optimize from \"./lib/optimize\";\n\nconst fsP = pify(fs);\nconst optP = pify(optimize);\nconst difP = pify(imageDiff);\n\ntest('optimize a PNG', async t => {\n  const buf = await fsP.readFile(path.join(__dirname, \"fixtures\",  'fixture.png'));\n  const data = await optP(buf);\n\n  console.error(buf.length, data.length)\n  t.true(data.length < buf.length);\n  // t.true(isJpg(data));\n  // t.true(isProgressive.buffer(data));\n});\n\ntest('optimize a JPG', async t => {\n  const buf = await fsP.readFile(path.join(__dirname, \"fixtures\",  'fixture.jpg'));\n  const data = await optP(buf);\n\n  console.error(buf.length, data.length)\n  t.true(data.length < buf.length);\n  // t.true(isJpg(data));\n  // t.true(isProgressive.buffer(data));\n\n  fsP.writeFile(path.join(__dirname, \"results\",  'result.jpg'), data);\n const diff = await difP({\n  actualImage: path.join(__dirname, \"fixtures\",  'fixture.jpg'),\n  expectedImage: path.join(__dirname, \"results\",  'result.jpg'),\n  diffImage: path.join(__dirname, \"results\",  'diff.jpg'),\n });\n t.false(diff);\n  \n});\n\ntest('foo', t => {\n    t.pass();\n});\n\ntest('bar', async t => {\n    const bar = Promise.resolve('bar');\n\n    t.is(await bar, 'bar');\n});\n"]}